# 墙壁自动规划

## 需求

- 设计一个模块，接受目标房间，集中式基地的中心、长度、要修建墙壁的厚度，返回要修墙的位置。
- 要做到从房间入口到基地中心的所有路径都要经过至少指定格数的墙壁。

## 流程

墙壁自动规划分为三步，其中包括一个概念：“蔓延”，指一个位置向其八个方向不为墙壁的地块上进行移动。

## 第一步：

以基地为起点开始蔓延，蔓延到指定距离时停止，停止的位置即为外侧墙壁（下图白色）。

![](https://s1.ax1x.com/2020/10/01/0KlpnO.png)

这一步的目的是为了保证所有的墙壁都可以通向基地中心，不然这个墙就没有存在的意义，如下，这张图下方那个弯钩里的墙壁就不需要。可以发现右下角的墙壁也是不需要的，因为它不通向房间的出入口，下一步就来筛除掉这些墙：

![](https://s1.ax1x.com/2020/10/01/0Kl9BD.png)

## 第二步

以房间入口为起点开始蔓延，蔓延到墙上或者上一步找到的外侧墙壁时停止，由此筛选出从入口可以抵达的墙壁位置（下图绿色）。

![](https://s1.ax1x.com/2020/10/01/0Klk4A.png)

可以看到，这一步中去掉了第一步中残留的那些无效的墙壁：

![](https://s1.ax1x.com/2020/10/01/0KlCHe.png)

# 第三步

这一步加厚墙体，以上一步筛选出的外侧墙壁开始，向内蔓延指定的步数（下图蓝色），由此保证从入口到中心点的路径不会有太薄的地方导致出现漏洞：

![](https://s1.ax1x.com/2020/10/01/0KlFNd.png)

![](https://s1.ax1x.com/2020/10/01/0KliAH.png)
