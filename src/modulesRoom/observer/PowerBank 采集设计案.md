# PB 采集小组设计案（已实装）

**前提**：8 级之前无法生成 25 HEAL 25 MOVE 的治疗者，所以请在 RCL 到 8 后再进行 PB 采集。

# 基本组成

- 采集旗帜：标记采集位置，记录采集进度和基本信息
- 攻击单位：攻击 PB，在成功拆除后更新 flag 状态并自杀
- 治疗单位：治疗攻击单位，在 flag 状态更新后自杀
- 运输单位：提前孵化，到达指定阶段后搬运 power，搬完一次后自杀并移除旗帜

# 采集阶段

- 攻击阶段 `attack`: 需要进攻单位进行拆除。
- 准备阶段 `prepare`: 开始生成运输单位，运输单位在抵达现场后会在一定距离处待命。
- 运输阶段 `transfe`: 需要运输单位进行搬运。

# 攻击单位

**prepare**

- 进入目标房间
- 搜索 pb 并进行移动，找到则将 pb 写入内存，否则移除旗帜
- 统计移动时间

**target**

- 根据旗帜内存中的 pb id 重建 pb。
- 没找到 pb 则进入运输阶段。移除自己和 pbHealer 的配置项。
- 找到 pb，进行攻击
- 攻击返回 OK 则检查 pb 剩余生命值，如果快打完了就进入准备阶段并发布 pb 搬运小组。

**身体部件**: 20\*ATTACK, 20\*MOVE（这个比例是 25 HEAL 能治疗的极限）

# 治疗单位

**target**

- 获取进攻单位
- 进攻单位是否存在
    - 不在了：自杀。
    - 在：使劲治疗。

**身体部件**: 25\*HEAL, 25\*MOVE

# 运输单位

**isNeed**

- 只会生成一次

**prepare**

- 抵达目标三格开外则准备完成

**source**

- 没到行动阶段了就 return
- 获取 PB Ruin 或者在地上找 power
- 从 Ruin 中或者地上拿到 power
- 拿到了就执行 target

**target**

- 搬运回终端检查返回值
- 如果返回 OK 则自杀并移除 pb 采集旗帜

**身体部件**: 32\*CARRY, 16\*MOVE