# 房间采集模块设计案

房间采集模块提供的 api 非常简单：启动 / 暂停采集 source，启动 / 暂停采集 mineral，以及查看当前状态五个接口。

## source 采集

在调用启动方法后，将会根据当前状态发布不同模式的采集单位，一共有三种：

- 启动模式：在发现 source 旁没有 link 也没有 container 时启用，将会放置工地并发布建造任务。同时一直采集能量并丢弃到地上。
- container 模式：发现 source 旁有 container 时启用，将会移动到 container 上，并无脑采集能量，会在每条命第一次抵达 container 发布维修任务。
- link 模式：发现 source 旁有 link 时启用，将会采集能量并装入对应 link。

**注意**：source 采集单位 **不会** 自己建造并维修 container，而是只发布对应任务并期待有其他单位执行。此举是为了避免采集单位在建造 / 维修 container 时没有能量产出的问题。

## mineral 采集

元素矿采集非常简单，发布一个采集单位，身上采满后移送至 storage，并在矿采空后暂停孵化，一直到矿重生后再次孵化并采集。

元素矿采集有上限，当 storage 中的对应矿物总量大于上限后暂停采集。