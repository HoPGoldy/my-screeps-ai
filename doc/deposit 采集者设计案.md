# deposit 采集者设计案（已实装）

# 原则

- 由 observer 在发现新 deposit 时发布
- 自维持孵化，直到 deposit 采集完成
- 采集完成后自行移除 deposit 旗帜

# 生命周期

沉积物采集者类似于 collector。

**isNeed 阶段**

- 检查是否有指定名称的旗帜
- 从旗帜内存中读取沉积物的冷却信息，大于 100 tick 就不予生成，没有冷却信息或小于 100 tick 就进行生成。

**source 阶段**

- 向 flag 所在位置移动，并开始记录移动需要的时长。
- 移动到了之后开始采集，并将移动所需的时间写入 flag 内存。
- 如果采集满了/自己快不行了就执行 target。

**target 阶段**

- 回家，将资源放在 terminal 里。
- 放完后检查自己的生命是否可以再跑一趟，可以的话就继续 source，否则自杀。